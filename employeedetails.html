<!DOCTYPE html>
<html>
<head>
    <title>Employee Details</title>

    <style>
        body{
            font-family: Arial, sans-serif;
            background: #f4f6f9;
            margin: 0;
        }

        #nav {
            background: #1e88e5;
            padding: 15px 0;
            margin-bottom: 40px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .deco {
            text-decoration: none;
            color: white;
            font-size: 20px;
            margin: 0 25px;
            font-weight: 500;
            transition: 0.3s ease;
        }

        .deco:hover {
            color: #ffeb3b;
        }

        table{
            width: 95%;
            margin: 30px auto;
            border-collapse: collapse;
            background: white;
        }

        th,td{
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }

        th{
            background: #b5e1ff;
        }

        input{
            width: 95%;
            padding: 6px;
            border: none;         
            background: transparent;
            text-align: center;
        }

        .editmode{
            border: 2px solid #1e88e5; 
            background: #eef6ff;
        }

        button{
            padding: 6px 12px;
            border: none;
            cursor: pointer;
            color: white;
        }

        .editbtn{
            background: #28a745;
        }

        .delbtn{
            background: #d9534f;
        }
    </style>
</head>

<body>

<div id="nav">
        <center>
            <a href="Admin.html" class="deco">Employee Leave Tracker</a>
            <a href="addemployee.html" class="deco">Add Employee</a>
            <a href="employeedetails.html" class="deco">Employee Details</a>
        </center>
    </div>

<table>
    <thead>
        <tr>
            <th>Employee ID</th>
            <th>Name</th>
            <th>Department</th>
            <th>Sick</th>
            <th>Casual</th>
            <th>Earned</th>
            <th>Emergency</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </thead>

    <tbody id="tbody"></tbody>
</table>

<script>

function loadEmployees(){
    let empdetails = JSON.parse(localStorage.getItem("storeempdetails")) || [];
    let tbody = document.getElementById("tbody");
    tbody.innerHTML = "";

    for(let i=0;i<empdetails.length;i++){
        let emp = empdetails[i];

        tbody.innerHTML += `
        <tr>
            <td><input id="empid${i}" value="${emp.empid}" disabled></td>
            <td><input id="name${i}" value="${emp.name}" disabled></td>
            <td><input id="dept${i}" value="${emp.dept}" disabled></td>
            <td><input id="sick${i}" value="${emp.sickleaves}" disabled></td>
            <td><input id="casual${i}" value="${emp.casualleaves}" disabled></td>
            <td><input id="earned${i}" value="${emp.earnedleaves}" disabled></td>
            <td><input id="emergency${i}" value="${emp.emergencyleaves}" disabled></td>

            <td>
                <button class="editbtn" onclick="editEmployee(${i},this)">Edit</button>
            </td>

            <td>
                <button class="delbtn" onclick="deleteEmployee(${i})">Delete</button>
            </td>
        </tr>
        `;
    }
}

function editEmployee(index,btn){
    let empdetails = JSON.parse(localStorage.getItem("storeempdetails")) || [];

    let fields = [
        "empid","name","dept",
        "sick","casual","earned","emergency"
    ];

    if(btn.innerHTML=="Edit"){
        for(let f of fields){
            let input = document.getElementById(f+index);
            input.disabled = false;
            input.classList.add("editmode"); // show border
        }
        btn.innerHTML="Save";
    }
    else{
        empdetails[index].empid = document.getElementById("empid"+index).value;
        empdetails[index].name = document.getElementById("name"+index).value;
        empdetails[index].dept = document.getElementById("dept"+index).value;
        empdetails[index].sickleaves = document.getElementById("sick"+index).value;
        empdetails[index].casualleaves = document.getElementById("casual"+index).value;
        empdetails[index].earnedleaves = document.getElementById("earned"+index).value;
        empdetails[index].emergencyleaves = document.getElementById("emergency"+index).value;

        localStorage.setItem("storeempdetails",JSON.stringify(empdetails));
        loadEmployees();
    }
}

function deleteEmployee(index){
    let empdetails = JSON.parse(localStorage.getItem("storeempdetails")) || [];
    empdetails.splice(index,1);
    localStorage.setItem("storeempdetails",JSON.stringify(empdetails));
    loadEmployees();
}

loadEmployees();

</script>

</body>
</html>
